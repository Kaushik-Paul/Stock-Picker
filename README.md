# AI Stock Picker

[![Live Website](https://img.shields.io/badge/Live_Website-6c63ff?logo=rocket&logoColor=white&labelColor=5a52d3)](https://projects.kaushikpaul.pp.ua/stock-picker)

> **⚠️ Important Disclaimer**  
> This application is for **educational and informational purposes only**. The stock picks and analyses generated by this AI are not financial advice. **Never** make investment decisions based solely on this tool's output. Always conduct your own research and consult with a qualified financial advisor before making any investment decisions. The developer(s) of this application are not responsible for any financial losses or decisions made based on this tool's outputs. Investing in stocks carries risks, including the potential loss of principal.

An AI-powered stock research assistant that:
- Finds companies trending in the news for a chosen sector
- Researches each company in depth
- Picks the best candidate for investment with a clear, markdown report
- Emails the full HTML report to you

The app uses a Gradio UI backed by a CrewAI pipeline with multiple agents and tools. It relies on OpenRouter-hosted LLMs (DeepSeek Chat v3.1 by default) and Brave Search for web data.

## Live Demo
- Access the app: [https://projects.kaushikpaul.pp.ua/stock-picker](https://projects.kaushikpaul.pp.ua/stock-picker)

## Features
- __Sector-based discovery__
  - Finds 2–3 companies trending in the selected sector using Brave Search
  - Avoids picking the same company twice
- __Automated research pipeline__
  - Multi-agent CrewAI workflow: finder → researcher → picker → email sender
  - Produces a concise, readable markdown report
- __Email delivery__
  - Converts the report to HTML and emails it via Mailjet
  - UI shows the same markdown content returned by the pipeline
- __Simple, modern UI__
  - Gradio-based interface with email validation and helpful accordions
- __Rate-limit friendly search__
  - Brave search calls are throttled to reduce API rate-limit issues

## Architecture Overview
- __Crew & Agents__: `src/stock_picker/crew.py`
  - Agents configured in `src/stock_picker/config/agents.yaml`
  - Tasks configured in `src/stock_picker/config/tasks.yaml`
- __Tools__
  - Brave search wrapper with throttling: `src/stock_picker/tools/throttled_brave_tool.py`
  - Mailjet email sender: `src/stock_picker/tools/push_tool.py`
- __UI__: `src/stock_picker/gradio_ui/stock_picker_ui.py`
- __Entry point__: `src/stock_picker/main.py`
- __Outputs__: `src/stock_picker/output/`
  - `trending_companies.json`, `research_report.json`, `decision.md`, `final_output.md`

## Prerequisites
- Python 3.10–3.12 (project targets >=3.10 per `pyproject.toml`)
- A modern browser (Chrome, Edge, Safari, Firefox)
- API keys and credentials (see Configuration)

## Quick Start

### 1) Clone the repo
```bash
git clone https://github.com/Kaushik-Paul/Stock-Picker.git
cd Stock-Picker
```

### 2) (Optional) Create and activate a virtual environment
```bash
python3 -m venv .venv
source .venv/bin/activate    # Windows: .venv\Scripts\activate
```

### 3) Install dependencies
#### Option A — Install with uv (recommended)
1) Install uv
- Linux/macOS:
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
# ensure ~/.local/bin is on your PATH
export PATH="$HOME/.local/bin:$PATH"
```
- Windows (PowerShell):
```powershell
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

2) Sync dependencies
```bash
uv sync
```

#### Option B — Install with pip
```bash
pip install -r requirements.txt
```

### 4) Set up MailJet for email delivery
1. Go to [MailJet](https://www.mailjet.com/) and sign up for a free account
2. After logging in, navigate to your [API Key Management](https://app.mailjet.com/account/apikeys)
3. Create a new API key pair (API Key and Secret Key)
4. Verify your sender email:
   - Go to [Sender Authentication & Domains](https://app.mailjet.com/account/sender)
   - Add and verify the email address you want to use for sending emails
   - Follow the verification email sent by MailJet

### 5) Create a .env file
Create a `.env` file in the project root with the following variables (adjust as needed):

```ini
# OpenRouter (LLM provider used in agents.yaml)
OPENROUTER_API_KEY=your_openrouter_key

# Brave Search (used by BraveSearchTool)
# Name per crewai_tools BraveSearchTool docs; commonly BRAVE_API_KEY
BRAVE_API_KEY=your_brave_search_api_key

# Mailjet (email delivery)
MAILJET_API_KEY=your_mailjet_key_from_step_4
MAILJET_API_SECRET=your_mailjet_secret_from_step_4
MAILJET_FROM_EMAIL=your_verified_email@yourdomain.com
```

### 6) Run the app
Using uv:
```bash
uv run python -m src.stock_picker.main
```
Using python directly:
```bash
python -m src.stock_picker.main
```
Gradio will print a local URL (e.g., http://127.0.0.1:7860). Open it in your browser.

## Built with CrewAI

This project leverages [CrewAI](https://docs.crewai.com/en/introduction), a powerful framework for orchestrating role-playing, autonomous AI agents. CrewAI enables the creation of sophisticated AI workflows where different agents can work together to accomplish complex tasks.

Key features used in this project:
- **Agents**: Specialized AI agents with specific roles (finder, researcher, picker, email sender)
- **Tasks**: Well-defined tasks that agents perform in sequence
- **Tools**: Custom tools for web search and email sending
- **Delegation**: Hierarchical task delegation between agents

To learn more about CrewAI and how to extend this project, visit the [official documentation](https://docs.crewai.com/en/introduction).

## Configuration

### LLMs and Agents
- File: `src/stock_picker/config/agents.yaml`
- Default agents use DeepSeek Chat v3.1 via OpenRouter: `openrouter/deepseek/deepseek-chat-v3.1:free`. The manager uses `openrouter/meta-llama/llama-3.1-405b-instruct:free`.
- To change models or providers, update the `llm` field for each agent. Ensure the appropriate API key and base configuration are set for your provider.

### Tasks & Outputs
- File: `src/stock_picker/config/tasks.yaml`
- Pipeline:
  1. `find_trending_companies` → outputs `output/trending_companies.json`
  2. `research_trending_companies` → outputs `output/research_report.json`
  3. `pick_best_company` → outputs `output/decision.md`
  4. `send_email_task` → emails HTML, returns the original markdown to the UI and writes `output/final_output.md`

### UI Behavior
- File: `src/stock_picker/gradio_ui/stock_picker_ui.py`
- You must enter a valid email to enable the Analyze button.
- The app displays progress and renders markdown results. The email is sent in HTML format.

## Usage
1. Choose a sector from the dropdown.
2. Enter your email address.
3. Click “Analyze Sector”.
4. Wait a few minutes while the pipeline runs. The result appears in the app and a full HTML email is sent to you.

## Outputs
Generated files are saved under `src/stock_picker/output/`:
- `trending_companies.json` — Initial list of companies from the news
- `research_report.json` — Detailed research for each company
- `decision.md` — The picker’s markdown report
- `final_output.md` — The final markdown returned to the UI (email is sent as HTML)

## Deployment
- The project is hosted at: [https://projects.kaushikpaul.pp.ua/stock-picker](https://projects.kaushikpaul.pp.ua/stock-picker)
- To deploy your own Space:
  - Set Space SDK to “Gradio” and point to `src/stock_picker/main.py` as the entry file.
  - Add required secrets in the Space settings (`OPENROUTER_API_KEY`, `BRAVE_API_KEY`, `MAILJET_API_KEY`, `MAILJET_API_SECRET`, `MAILJET_FROM_EMAIL`).
  - Ensure the Python version matches (3.10–3.12) and install via `requirements.txt` or `pyproject.toml`.

## Troubleshooting
- __Missing or invalid API keys__
  - Verify `.env` values and that your provider accounts are active.
- __Brave Search rate limits__
  - The tool adds a small delay between calls, but you may still hit limits. Consider higher limits or caching.
- __Mailjet send failures__
  - Check API credentials, sender domain verification, and recipient address validity.
- __LLM errors / 429s__
  - Confirm `OPENROUTER_API_KEY` is valid and you’re using model IDs available to your account.
- __Virtualenv issues on Windows__
  - Use `.venv\Scripts\activate` and ensure `python` points to the venv interpreter.

## Security & Privacy
- Do not commit `.env` files or secrets.
- Emails are sent via Mailjet. Review Mailjet’s data policies for production usage.
- **Disclaimer**: Please refer to the important disclaimer at the top of this README for critical information about the application's purpose and limitations.

## License
This project is licensed under the MIT License — see the [LICENSE](LICENSE) file for details.