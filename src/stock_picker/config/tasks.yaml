find_trending_companies:
  description: >
    Find the top trending companies in the news in {sector} by searching the latest news. Find new companies that you've not found before.
  expected_output: >
    A list of trending companies in {sector}
  agent: trending_company_finder
  output_file: output/trending_companies.json

research_trending_companies:
  description: >
    Given a list of trending companies, provide detailed analysis of each company in a report by searching online
  expected_output: >
    A report containing detailed analysis of each company
  agent: financial_researcher
  context:
    - find_trending_companies
  output_file: output/research_report.json

pick_best_company:
  description: >
    Analyze the research findings and pick the best company for investment.
    Produce a clear markdown report explaining:
      * the chosen company and why it was selected
      * the companies that were not selected and why.
  expected_output: >
    A markdown-formatted report as described above. It must not include an email subject or any email headers.
  agent: stock_picker
  context:
    - research_trending_companies
  output_file: output/decision.md

send_email_task:
  description: >
    Given a markdown file, convert it to HTML, create a subject for the email and send the email to {user_email_address}.
    After sending, return **exactly** the original markdown content (unaltered), so the application can render it in the UI.
  expected_output: >
    The same markdown content that was provided to this task.
  agent: email_sender
  context:
    - pick_best_company
  output_file: output/final_output.md
